'use client'
import React, { useEffect, useState } from 'react';
import './navbarCss.css';
import Link from 'next/link';
import Head from 'next/head';
import { getCookies, getCookie, deleteCookie } from 'cookies-next';
import { useRouter } from 'next/navigation';

export default function NavBar() {
    const { push } = useRouter();
    const [isLogin, setIsLogin] = useState(false);
    useEffect(() => {
        let jwt = getCookie('jwt')
        if (jwt) {
            setIsLogin(true);
        }
        else {
            setIsLogin(false);
        }
    }, [])

    const handleLogout = async () => {
        const response = await fetch('http://localhost:8000/api/auth/logout', {
            method: 'POST',
            credentials: 'include'
        });
        console.log(await response.json());
        deleteCookie('jwt');
        setIsLogin(false);
        push('/')
    }

    return (
        <div id='navbar' className="flex fullW r pagePadding centerVerti spaceBetweenH padtop15 padtom15 z1">
            <div className="flex r centerVerti gap5 marleft-5">
                {/* <svg width="25" height="25" viewBox="0 0 40 40" className='marri15' fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_85_1600)">
                        <rect x="3" y="3" width="10" height="10" rx="2" className="textColored"/>
                        <rect x="15" y="3" width="10" height="10" rx="2" className="textColored"/>
                        <rect x="27" y="3" width="10" height="10" rx="2" className="textColored"/>
                    </g>
                    <g clip-path="url(#clip1_85_1600)">
                        <rect x="3" y="15" width="10" height="10" rx="2" className="textColored"/>
                        <rect x="15" y="15" width="10" height="10" rx="2" className="textColored"/>
                        <rect x="27" y="15" width="10" height="10" rx="2" className="textColored"/>
                    </g>
                    <g clip-path="url(#clip2_85_1600)">
                        <rect x="3" y="27" width="10" height="10" rx="2" className="textColored"/>
                        <rect x="15" y="27" width="10" height="10" rx="2" className="textColored"/>
                        <rect x="27" y="27" width="10" height="10" rx="2" className="textColored"/>
                    </g>
                    <defs>
                        <clipPath id="clip0_85_1600">
                            <rect width="34" height="10" fill="white" transform="translate(3 3)"/>
                        </clipPath>
                        <clipPath id="clip1_85_1600">
                            <rect width="34" height="10" fill="white" transform="translate(3 15)"/>
                        </clipPath>
                        <clipPath id="clip2_85_1600">
                            <rect width="34" height="10" fill="white" transform="translate(3 27)"/>
                        </clipPath>
                    </defs>
                </svg> */}
                <svg width="25" height="25" viewBox="0 0 40 40" className='marri15' fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12.4 4.92376C12.9829 4.58723 13.2743 4.41897 13.5842 4.35311C13.8583 4.29483 14.1417 4.29483 14.4158 4.35311C14.7257 4.41897 15.0171 4.58723 15.6 4.92376L17.5962 6.07624C18.179 6.41277 18.4705 6.58103 18.6824 6.81644C18.87 7.02473 19.0117 7.27011 19.0983 7.53667C19.1962 7.83793 19.1962 8.17446 19.1962 8.84752V11.1525C19.1962 11.8255 19.1962 12.1621 19.0983 12.4633C19.0117 12.7299 18.87 12.9753 18.6824 13.1836C18.4705 13.419 18.179 13.5872 17.5962 13.9238L15.6 15.0762C15.0171 15.4128 14.7257 15.581 14.4158 15.6469C14.1417 15.7052 13.8583 15.7052 13.5842 15.6469C13.2743 15.581 12.9829 15.4128 12.4 15.0762L10.4038 13.9238C9.82096 13.5872 9.52952 13.419 9.31756 13.1836C9.13002 12.9753 8.98835 12.7299 8.90173 12.4633C8.80385 12.1621 8.80385 11.8255 8.80385 11.1525V8.84752C8.80385 8.17446 8.80385 7.83793 8.90173 7.53667C8.98835 7.27011 9.13002 7.02473 9.31756 6.81644C9.52952 6.58103 9.82096 6.41277 10.4038 6.07624L12.4 4.92376Z" className="textColored" />
                    <path d="M6.4 14.9238C6.98289 14.5872 7.27433 14.419 7.58418 14.3531C7.85833 14.2948 8.14167 14.2948 8.41582 14.3531C8.72567 14.419 9.01711 14.5872 9.6 14.9238L11.5962 16.0762C12.179 16.4128 12.4705 16.581 12.6824 16.8164C12.87 17.0247 13.0117 17.2701 13.0983 17.5367C13.1962 17.8379 13.1962 18.1745 13.1962 18.8475V21.1525C13.1962 21.8255 13.1962 22.1621 13.0983 22.4633C13.0117 22.7299 12.87 22.9753 12.6824 23.1836C12.4705 23.419 12.179 23.5872 11.5962 23.9238L9.6 25.0762C9.01711 25.4128 8.72567 25.581 8.41582 25.6469C8.14167 25.7052 7.85833 25.7052 7.58418 25.6469C7.27433 25.581 6.98289 25.4128 6.4 25.0762L4.40385 23.9238C3.82096 23.5872 3.52952 23.419 3.31756 23.1836C3.13002 22.9753 2.98835 22.7299 2.90173 22.4633C2.80385 22.1621 2.80385 21.8255 2.80385 21.1525V18.8475C2.80385 18.1745 2.80385 17.8379 2.90173 17.5367C2.98835 17.2701 3.13002 17.0247 3.31756 16.8164C3.52952 16.581 3.82096 16.4128 4.40385 16.0762L6.4 14.9238Z" className="textColored" />
                    <path d="M18.4 14.9238C18.9829 14.5872 19.2743 14.419 19.5842 14.3531C19.8583 14.2948 20.1417 14.2948 20.4158 14.3531C20.7257 14.419 21.0171 14.5872 21.6 14.9238L23.5962 16.0762C24.179 16.4128 24.4705 16.581 24.6824 16.8164C24.87 17.0247 25.0117 17.2701 25.0983 17.5367C25.1962 17.8379 25.1962 18.1745 25.1962 18.8475V21.1525C25.1962 21.8255 25.1962 22.1621 25.0983 22.4633C25.0117 22.7299 24.87 22.9753 24.6824 23.1836C24.4705 23.419 24.179 23.5872 23.5962 23.9238L21.6 25.0762C21.0171 25.4128 20.7257 25.581 20.4158 25.6469C20.1417 25.7052 19.8583 25.7052 19.5842 25.6469C19.2743 25.581 18.9829 25.4128 18.4 25.0762L16.4038 23.9238C15.821 23.5872 15.5295 23.419 15.3176 23.1836C15.13 22.9753 14.9883 22.7299 14.9017 22.4633C14.8038 22.1621 14.8038 21.8255 14.8038 21.1525V18.8475C14.8038 18.1745 14.8038 17.8379 14.9017 17.5367C14.9883 17.2701 15.13 17.0247 15.3176 16.8164C15.5295 16.581 15.821 16.4128 16.4038 16.0762L18.4 14.9238Z" stroke="var(--tColor)" />
                    <path d="M30.4 14.9238C30.9829 14.5872 31.2743 14.419 31.5842 14.3531C31.8583 14.2948 32.1417 14.2948 32.4158 14.3531C32.7257 14.419 33.0171 14.5872 33.6 14.9238L35.5962 16.0762C36.179 16.4128 36.4705 16.581 36.6824 16.8164C36.87 17.0247 37.0117 17.2701 37.0983 17.5367C37.1962 17.8379 37.1962 18.1745 37.1962 18.8475V21.1525C37.1962 21.8255 37.1962 22.1621 37.0983 22.4633C37.0117 22.7299 36.87 22.9753 36.6824 23.1836C36.4705 23.419 36.179 23.5872 35.5962 23.9238L33.6 25.0762C33.0171 25.4128 32.7257 25.581 32.4158 25.6469C32.1417 25.7052 31.8583 25.7052 31.5842 25.6469C31.2743 25.581 30.9829 25.4128 30.4 25.0762L28.4038 23.9238C27.821 23.5872 27.5295 23.419 27.3176 23.1836C27.13 22.9753 26.9883 22.7299 26.9017 22.4633C26.8038 22.1621 26.8038 21.8255 26.8038 21.1525V18.8475C26.8038 18.1745 26.8038 17.8379 26.9017 17.5367C26.9883 17.2701 27.13 17.0247 27.3176 16.8164C27.5295 16.581 27.821 16.4128 28.4038 16.0762L30.4 14.9238Z" className="textColored" />
                    <path d="M12.4 24.9238C12.9829 24.5872 13.2743 24.419 13.5842 24.3531C13.8583 24.2948 14.1417 24.2948 14.4158 24.3531C14.7257 24.419 15.0171 24.5872 15.6 24.9238L17.5962 26.0762C18.179 26.4128 18.4705 26.581 18.6824 26.8164C18.87 27.0247 19.0117 27.2701 19.0983 27.5367C19.1962 27.8379 19.1962 28.1745 19.1962 28.8475V31.1525C19.1962 31.8255 19.1962 32.1621 19.0983 32.4633C19.0117 32.7299 18.87 32.9753 18.6824 33.1836C18.4705 33.419 18.179 33.5872 17.5962 33.9238L15.6 35.0762C15.0171 35.4128 14.7257 35.581 14.4158 35.6469C14.1417 35.7052 13.8583 35.7052 13.5842 35.6469C13.2743 35.581 12.9829 35.4128 12.4 35.0762L10.4038 33.9238C9.82096 33.5872 9.52952 33.419 9.31756 33.1836C9.13002 32.9753 8.98835 32.7299 8.90173 32.4633C8.80385 32.1621 8.80385 31.8255 8.80385 31.1525V28.8475C8.80385 28.1745 8.80385 27.8379 8.90173 27.5367C8.98835 27.2701 9.13002 27.0247 9.31756 26.8164C9.52952 26.581 9.82096 26.4128 10.4038 26.0762L12.4 24.9238Z" className="textColored" />
                    <path d="M24.4 24.9238C24.9829 24.5872 25.2743 24.419 25.5842 24.3531C25.8583 24.2948 26.1417 24.2948 26.4158 24.3531C26.7257 24.419 27.0171 24.5872 27.6 24.9238L29.5962 26.0762C30.179 26.4128 30.4705 26.581 30.6824 26.8164C30.87 27.0247 31.0117 27.2701 31.0983 27.5367C31.1962 27.8379 31.1962 28.1745 31.1962 28.8475V31.1525C31.1962 31.8255 31.1962 32.1621 31.0983 32.4633C31.0117 32.7299 30.87 32.9753 30.6824 33.1836C30.4705 33.419 30.179 33.5872 29.5962 33.9238L27.6 35.0762C27.0171 35.4128 26.7257 35.581 26.4158 35.6469C26.1417 35.7052 25.8583 35.7052 25.5842 35.6469C25.2743 35.581 24.9829 35.4128 24.4 35.0762L22.4038 33.9238C21.821 33.5872 21.5295 33.419 21.3176 33.1836C21.13 32.9753 20.9883 32.7299 20.9017 32.4633C20.8038 32.1621 20.8038 31.8255 20.8038 31.1525V28.8475C20.8038 28.1745 20.8038 27.8379 20.9017 27.5367C20.9883 27.2701 21.13 27.0247 21.3176 26.8164C21.5295 26.581 21.821 26.4128 22.4038 26.0762L24.4 24.9238Z" className="textColored" />
                    <path d="M24.4 4.92376C24.9829 4.58723 25.2743 4.41897 25.5842 4.35311C25.8583 4.29483 26.1417 4.29483 26.4158 4.35311C26.7257 4.41897 27.0171 4.58723 27.6 4.92376L29.5962 6.07624C30.179 6.41277 30.4705 6.58103 30.6824 6.81644C30.87 7.02473 31.0117 7.27011 31.0983 7.53667C31.1962 7.83793 31.1962 8.17446 31.1962 8.84752V11.1525C31.1962 11.8255 31.1962 12.1621 31.0983 12.4633C31.0117 12.7299 30.87 12.9753 30.6824 13.1836C30.4705 13.419 30.179 13.5872 29.5962 13.9238L27.6 15.0762C27.0171 15.4128 26.7257 15.581 26.4158 15.6469C26.1417 15.7052 25.8583 15.7052 25.5842 15.6469C25.2743 15.581 24.9829 15.4128 24.4 15.0762L22.4038 13.9238C21.821 13.5872 21.5295 13.419 21.3176 13.1836C21.13 12.9753 20.9883 12.7299 20.9017 12.4633C20.8038 12.1621 20.8038 11.8255 20.8038 11.1525V8.84752C20.8038 8.17446 20.8038 7.83793 20.9017 7.53667C20.9883 7.27011 21.13 7.02473 21.3176 6.81644C21.5295 6.58103 21.821 6.41277 22.4038 6.07624L24.4 4.92376Z" className="textColored" />
                </svg>

                <span id="logo">
                    <Link href='/' className='em1_5 b'>
                        PixelHive™
                    </Link>
                </span>
            </div>
            {!isLogin ? (
                <div className="flex marri-10 gap10">
                    <span id="sign-in-button">
                        <Link href='/auth/login'>
                            <div className="coloredEl pad10 padleft25 padri25 boxedEl1 borrad5">
                                Sign In
                            </div>
                        </Link>
                    </span>
                    <span id="register-button">
                        <Link href='/auth/register'>
                            <div className="coloredEl pad10 padleft25 padri25 boxedEl1 borrad5">
                                Register
                            </div>
                        </Link>
                    </span>
                </div>
            ) : (
                <div className="flex marri-10 gap10">
                    <span>
                        <Link href='/merchant'>
                            <div className="coloredEl pad10 padleft25 padri25 boxedEl1 borrad5">
                                Merhant
                            </div>
                        </Link>
                    </span>
                    <span onClick={() => handleLogout()}>
                        <div className="coloredEl pad10 padleft25 padri25 boxedEl1 borrad5">
                            Logout
                        </div>
                    </span>
                </div>
            )}
        </div>
    )
}
